<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Etch-a-Sketch</title>
    <link rel="stylesheet" href="./style/style.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Gloria+Hallelujah&family=Open+Sans&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <main>
      <h1>Etch-a-Sketch</h1>
      <button onclick="resetGrid()">RESET</button>
      <button onclick="ChangeColor()">Change color</button>
      <div id="container"></div>
    </main>
  </body>
  <script>
    var size = 20;
    var color = "black";
    // Getting the container div DOM element
    const containerDiv = document.querySelector("#container");

    function generateGrid(size, color) {
      // Resetting the container
      containerDiv.innerHTML = "";

      // Creating the row container
      const rowGrid = document.createElement("div");
      rowGrid.classList.add("row");

      // Creting the col div
      const colGrid = document.createElement("div");
      colGrid.classList.add("col");

      // Put 16 col div insed one row container
      for (let i = 0; i < size; i++) {
        rowGrid.appendChild(colGrid.cloneNode(true));
      }

      // Put 16 row container inside the container div
      for (let i = 0; i < size; i++) {
        containerDiv.appendChild(rowGrid.cloneNode(true));
      }

      const cells = Array.from(document.querySelectorAll(".col"));
      cells.forEach((cell) =>
        cell.addEventListener("mouseenter", function (e) {
          event.target.style.backgroundColor = color;
        })
      );
    }

    generateGrid(16, color);

    function resetGrid() {
      while (true) {
        size = Number(prompt("How many tiles per row and column do you want?"));
        if (size) {
          break;
        }
        alert("Please input number only");
      }
      generateGrid(size, color);
    }

    function ChangeColor() {
      while (true) {
        color = prompt(
          "Choose a color \(Red, Blue, Purple, Black\)"
        ).toLowerCase();
        if (
          color == "red" ||
          color == "blue" ||
          color == "purple" ||
          color == "black"
        ) {
          break;
        }
        alert("Please input color from the list above");
      }
      generateGrid(size, color);
    }
  </script>
</html>
